<!DOCTYPE html>
<html>
<head>
    <title>ðŸ˜ˆ Level Devil ðŸ˜ˆ</title>
    <link rel="icon" type="image/x-icon" href="https://math.hws.edu/favicon.ico">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
    </style>
</head>
<body>
    <iframe id="gameFrame" src="https://leveldevil-unblocked.github.io/" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen allow="fullscreen *; autoplay; gamepad"></iframe>

    <script>
        const iframe = document.getElementById('gameFrame');
        const ALLOWED_URLS = [
            'https://leveldevil-unblocked.github.io/',
            'https://leveldevil-unblocked.github.io/#' 
        ];
        const BLOCKED_KEYWORDS = ['securly', 'blocked', 'access denied', 'restricted'];
        let isReloading = false;
        let loadCount = 0;

        function isAllowedUrl(url) {
            if (!url) return false;
            return ALLOWED_URLS.includes(url);
        }

        function isBlockedUrl(url) {
            if (!url) return false;
            const lowerUrl = url.toLowerCase();
            return BLOCKED_KEYWORDS.some(keyword => lowerUrl.includes(keyword));
        }

        iframe.addEventListener('load', () => {
            loadCount++;
            
            if (loadCount <= 1) {
                setTimeout(() => {
                    try {
                        const currentUrl = iframe.contentWindow.location.href;
                        if (!isAllowedUrl(currentUrl)) {
                            triggerReload();
                        }
                    } catch (e) {
                        // Wait for next load event
                    }
                }, 3000);
                return;
            }
            
            if (isReloading) return;
            
            setTimeout(() => {
                checkAndReload();
            }, 2000);
        });

        function checkAndReload() {
            if (isReloading) return;
            
            try {
                const currentUrl = iframe.contentWindow.location.href;
                
                if (currentUrl) {
                    if (isAllowedUrl(currentUrl)) {
                        return;
                    }
                    triggerReload();
                }
            } catch (e) {
                const title = document.title.toLowerCase();
                if (isBlockedUrl(title) || title.includes('securly')) {
                    triggerReload();
                }
            }
        }

        function triggerReload() {
            if (isReloading) return;
            isReloading = true;
            setTimeout(() => location.reload(), 3000);
        }

        const titleObserver = new MutationObserver(() => {
            if (isReloading) return;
            
            const title = document.title.toLowerCase();
            if (BLOCKED_KEYWORDS.some(keyword => title.includes(keyword))) {
                triggerReload();
            }
        });
        
        setTimeout(() => {
            const titleElement = document.querySelector('title');
            if (titleElement) {
                titleObserver.observe(titleElement, {
                    childList: true,
                    subtree: true,
                    characterData: true
                });
            }
        }, 4000);
    </script>
</body>
</html>
